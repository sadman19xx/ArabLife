# دليل إعداد البوت

هذا الدليل سيساعدك في إعداد وتشغيل البوت بشكل صحيح.

## المتطلبات الأساسية

1. Python 3.8 أو أحدث
2. FFmpeg (للميزات الصوتية)
3. توكن بوت Discord
4. معرف السيرفر (Guild ID)

## خطوات الإعداد

1. قم بنسخ ملف `.env.example` إلى `.env`:
```bash
cp .env.example .env
```

2. قم بتعديل ملف `.env` وإضافة المعلومات المطلوبة:
- `TOKEN`: توكن البوت من [Discord Developer Portal](https://discord.com/developers/applications)
- `GUILD_ID`: معرف السيرفر
- معرفات القنوات والرتب المطلوبة

3. قم بتثبيت المتطلبات البرمجية:
```bash
pip install -r requirements.txt
```

4. قم بتشغيل البوت:
```bash
python bot.py
```

## إعداد الميزات

### نظام التذاكر

1. قم بإنشاء:
   - رتبة للموظفين (`TICKET_STAFF_ROLE_ID`)
   - فئة للتذاكر (`TICKET_CATEGORY_ID`)
   - قناة لسجلات التذاكر (`TICKET_LOG_CHANNEL_ID`)
   - رتب للأقسام المختلفة (شكاوى اللاعبين، الصحة، الداخلية، الاقتراحات)

2. أضف المعرفات في ملف `.env`

3. استخدم الأمر `/setup-tickets` في القناة المطلوبة

### نظام الحماية

1. قم بتكوين إعدادات الحماية في `.env`:
   - `WARNING_THRESHOLD`: عدد التحذيرات قبل اتخاذ إجراء
   - `WARNING_ACTION`: نوع الإجراء (timeout, kick, ban)
   - `RAID_PROTECTION`: تفعيل الحماية من الهجمات
   - `SPAM_DETECTION`: تفعيل الحماية من الرسائل المكررة

2. حدد الرتب المستثناة من الفحوصات الأمنية في `EXEMPT_ROLES`

### نظام المستويات

1. قم بتكوين إعدادات المستويات في `.env`:
   - `XP_PER_MESSAGE`: نقاط الخبرة لكل رسالة
   - `XP_COOLDOWN`: الوقت بين كل منح للنقاط
   - `ROLE_REWARDS`: الرتب التي تُمنح عند الوصول لمستويات معينة

2. حدد قناة إعلانات المستويات في `LEVEL_UP_CHANNEL_ID`

### نظام المراقبة الآلي

1. قم بتكوين إعدادات المراقبة في `.env`:
   - `AUTOMOD_SPAM_THRESHOLD`: عدد الرسائل المسموح في الفترة المحددة
   - `AUTOMOD_RAID_THRESHOLD`: عدد الانضمامات التي تعتبر هجوماً
   - `AUTOMOD_ACTION`: الإجراء المتخذ عند المخالفة

2. حدد القنوات والرتب المستثناة في:
   - `AUTOMOD_IGNORED_CHANNELS`
   - `AUTOMOD_IGNORED_ROLES`

## الأوامر المتاحة

استخدم `/help` لعرض قائمة الأوامر المتاحة، أو أضف اسم الفئة للحصول على تفاصيل أكثر:

- `/help tickets` - نظام التذاكر
- `/help security` - نظام الحماية
- `/help leveling` - نظام المستويات
- `/help automod` - نظام المراقبة الآلي
- `/help welcome` - نظام الترحيب
- `/help roles` - إدارة الرتب
- `/help voice` - إعدادات الصوت
- `/help status` - حالة البوت
- `/help admin` - أوامر الإدارة

## السجلات والمراقبة

1. السجلات تُحفظ في:
   - ملف السجلات: `logs/bot.log`
   - قناة الأخطاء: `ERROR_LOG_CHANNEL_ID`
   - قناة المراقبة: `AUDIT_LOG_CHANNEL_ID`
   - قناة نشاط الرتب: `ROLE_ACTIVITY_LOG_CHANNEL_ID`

2. يمكن تعديل إعدادات السجلات في `.env`:
   - `LOG_LEVEL`: مستوى تفصيل السجلات
   - `LOG_MAX_BYTES`: الحجم الأقصى لملف السجلات
   - `LOG_BACKUP_COUNT`: عدد نسخ السجلات القديمة

## حل المشاكل

1. **البوت لا يستجيب للأوامر**:
   - تأكد من صحة التوكن
   - تأكد من تفعيل Privileged Gateway Intents
   - تحقق من صلاحيات البوت في السيرفر

2. **مشاكل في نظام التذاكر**:
   - تأكد من صحة معرفات الرتب والقنوات
   - تحقق من صلاحيات البوت في فئة التذاكر

3. **مشاكل في الميزات الصوتية**:
   - تأكد من تثبيت FFmpeg
   - تحقق من مسار FFmpeg في `.env`

4. **أخطاء في قاعدة البيانات**:
   - تأكد من وجود مجلد `data`
   - تحقق من صلاحيات الكتابة

## الأمان والحماية

1. احمِ ملف `.env`:
   - لا تشارك الملف أبداً
   - أضفه إلى `.gitignore`
   - استخدم صلاحيات ملف محدودة

2. راقب سجلات البوت:
   - تحقق من السجلات بانتظام
   - اضبط تنبيهات للأحداث المهمة

3. حافظ على تحديث البوت:
   - تابع التحديثات الأمنية
   - حدّث المكتبات بانتظام

## الدعم

إذا واجهت أي مشاكل:
1. تحقق من السجلات
2. راجع هذا الدليل
3. تأكد من صحة الإعدادات
4. تواصل مع فريق الدعم

## تحديث البوت

1. احصل على آخر التحديثات:
```bash
git pull origin main
```

2. حدّث المتطلبات:
```bash
pip install -r requirements.txt
```

3. راجع التغييرات في `.env.example`

4. أعد تشغيل البوت
